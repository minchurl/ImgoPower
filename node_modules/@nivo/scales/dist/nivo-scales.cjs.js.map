{"version":3,"file":"nivo-scales.cjs.js","sources":["../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","../src/timeHelpers.ts","../src/linearScale.ts","../src/pointScale.ts","../src/bandScale.ts","../src/timeScale.ts","../src/logScale.ts","../src/symlogScale.ts","../src/compute.ts"],"sourcesContent":["export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithoutHoles from \"@babel/runtime/helpers/esm/arrayWithoutHoles\";\nimport iterableToArray from \"@babel/runtime/helpers/esm/iterableToArray\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableSpread from \"@babel/runtime/helpers/esm/nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","import { timeParse, utcParse } from 'd3-time-format'\n\nexport const timePrecisions = [\n    'millisecond',\n    'second',\n    'minute',\n    'hour',\n    'day',\n    'month',\n    'year',\n] as const\n\nexport type TIME_PRECISION = typeof timePrecisions[number]\n\nexport const precisionCutOffs: ((date: Date) => void)[] = [\n    date => date.setMilliseconds(0),\n    date => date.setSeconds(0),\n    date => date.setMinutes(0),\n    date => date.setHours(0),\n    date => date.setDate(1),\n    date => date.setMonth(0),\n]\n\nexport const precisionCutOffsByType: Record<TIME_PRECISION, ((date: Date) => void)[]> = {\n    millisecond: [],\n    second: precisionCutOffs.slice(0, 1),\n    minute: precisionCutOffs.slice(0, 2),\n    hour: precisionCutOffs.slice(0, 3),\n    day: precisionCutOffs.slice(0, 4),\n    month: precisionCutOffs.slice(0, 5),\n    year: precisionCutOffs.slice(0, 6),\n}\n\nexport const createPrecisionMethod = (precision: TIME_PRECISION) => (date: Date) => {\n    precisionCutOffsByType[precision].forEach(cutOff => {\n        cutOff(date)\n    })\n\n    return date\n}\n\nexport const createDateNormalizer = ({\n    format = 'native',\n    precision = 'millisecond',\n    useUTC = true,\n}: {\n    format?: 'native' | string\n    precision?: TIME_PRECISION\n    useUTC?: boolean\n}) => {\n    const precisionFn = createPrecisionMethod(precision)\n\n    return (value: Date | string | undefined) => {\n        if (value === undefined) {\n            return value\n        }\n\n        if (format === 'native' || value instanceof Date) {\n            return precisionFn(value as Date)\n        }\n\n        const parseTime = useUTC ? utcParse(format) : timeParse(format)\n        return precisionFn(parseTime(value as string) as Date)\n    }\n}\n","import { NumberValue, scaleLinear } from 'd3-scale'\nimport { ScaleLinearSpec, ScaleLinear, ComputedSerieAxis, ScaleAxis } from './types'\n\nexport const createLinearScale = <Output extends NumberValue>(\n    {\n        min = 0,\n        max = 'auto',\n        stacked = false,\n        reverse = false,\n        clamp = false,\n        nice = false,\n    }: ScaleLinearSpec,\n    data: ComputedSerieAxis<Output>,\n    size: number,\n    axis: ScaleAxis\n) => {\n    let minValue: NumberValue\n    if (min === 'auto') {\n        minValue = stacked === true ? data.minStacked ?? 0 : data.min\n    } else {\n        minValue = min\n    }\n\n    let maxValue: NumberValue\n    if (max === 'auto') {\n        maxValue = stacked === true ? data.maxStacked ?? 0 : data.max\n    } else {\n        maxValue = max\n    }\n\n    const scale = scaleLinear<number, Output>()\n        .rangeRound(axis === 'x' ? [0, size] : [size, 0])\n        .domain(reverse ? [maxValue, minValue] : [minValue, maxValue])\n        .clamp(clamp)\n\n    if (nice === true) scale.nice()\n    else if (typeof nice === 'number') scale.nice(nice)\n\n    const typedScale = (scale as unknown) as ScaleLinear<number>\n    typedScale.type = 'linear'\n    typedScale.stacked = stacked\n\n    return typedScale\n}\n","import { scalePoint } from 'd3-scale'\nimport { ComputedSerieAxis, ScalePoint, ScalePointSpec, StringValue } from './types'\n\nexport const createPointScale = <Input extends StringValue>(\n    _spec: ScalePointSpec,\n    data: ComputedSerieAxis<Input>,\n    size: number\n) => {\n    const scale = scalePoint<Input>().range([0, size]).domain(data.all)\n\n    const typedScale = scale as ScalePoint<Input>\n    typedScale.type = 'point'\n\n    return typedScale\n}\n","import { scaleBand } from 'd3-scale'\nimport { ComputedSerieAxis, ScaleBand, ScaleBandSpec, StringValue, ScaleAxis } from './types'\n\nexport const createBandScale = <Input extends StringValue>(\n    { round = true }: ScaleBandSpec,\n    data: ComputedSerieAxis<Input>,\n    size: number,\n    axis: ScaleAxis\n) => {\n    const scale = scaleBand<Input>()\n        .range(axis === 'x' ? [0, size] : [size, 0])\n        .domain(data.all)\n        .round(round)\n\n    const typedScale = scale as ScaleBand<Input>\n    typedScale.type = 'band'\n\n    return typedScale\n}\n","import { NumberValue, scaleTime, scaleUtc } from 'd3-scale'\nimport { createDateNormalizer } from './timeHelpers'\nimport { ComputedSerieAxis, ScaleTime, ScaleTimeSpec } from './types'\n\nexport const createTimeScale = <Input extends Date | NumberValue>(\n    {\n        format = 'native',\n        precision = 'millisecond',\n        min = 'auto',\n        max = 'auto',\n        useUTC = true,\n        nice = false,\n    }: ScaleTimeSpec,\n    data: ComputedSerieAxis<string | Date>,\n    size: number\n) => {\n    const normalize = createDateNormalizer({ format, precision, useUTC })\n\n    let minValue: Date | undefined\n    if (min === 'auto') {\n        minValue = normalize(data.min)\n    } else if (format !== 'native') {\n        minValue = normalize(min)\n    } else {\n        minValue = min as Date\n    }\n\n    let maxValue: Date | undefined\n    if (max === 'auto') {\n        maxValue = normalize(data.max)\n    } else if (format !== 'native') {\n        maxValue = normalize(max)\n    } else {\n        maxValue = max as Date\n    }\n\n    const scale = useUTC ? scaleUtc() : scaleTime()\n\n    scale.range([0, size])\n\n    if (minValue && maxValue) scale.domain([minValue, maxValue])\n\n    if (nice === true) scale.nice()\n    else if (typeof nice === 'object' || typeof nice === 'number') scale.nice(nice)\n\n    const typedScale = (scale as unknown) as ScaleTime<Input>\n\n    typedScale.type = 'time'\n    typedScale.useUTC = useUTC\n\n    return typedScale\n}\n","import { scaleLog } from 'd3-scale'\nimport { ComputedSerieAxis, ScaleAxis, ScaleLog, ScaleLogSpec } from './types'\n\nexport const createLogScale = (\n    { base = 10, min = 'auto', max = 'auto' }: ScaleLogSpec,\n    data: ComputedSerieAxis<number>,\n    size: number,\n    axis: ScaleAxis\n) => {\n    const hasZero = data.all.some(v => v === 0)\n    if (hasZero) {\n        throw new Error(`a log scale domain must not include or cross zero`)\n    }\n\n    let sign: number\n    let hasMixedSign = false\n    data.all\n        .filter(v => v != null)\n        .forEach(v => {\n            if (hasMixedSign) return\n            if (sign === undefined) {\n                sign = Math.sign(v)\n            } else if (Math.sign(v) !== sign) {\n                hasMixedSign = true\n            }\n        })\n\n    if (hasMixedSign) {\n        throw new Error(`a log scale domain must be strictly-positive or strictly-negative`)\n    }\n\n    let minValue: number\n    if (min === 'auto') {\n        minValue = data.min\n    } else {\n        minValue = min\n    }\n\n    let maxValue: number\n    if (max === 'auto') {\n        maxValue = data.max\n    } else {\n        maxValue = max\n    }\n\n    const scale = scaleLog<number, number>()\n        .domain([minValue, maxValue])\n        .rangeRound(axis === 'x' ? [0, size] : [size, 0])\n        .base(base)\n        .nice()\n\n    const typedScale = scale as ScaleLog\n    typedScale.type = 'log'\n\n    return scale\n}\n","import { scaleSymlog } from 'd3-scale'\nimport { ComputedSerieAxis, ScaleAxis, ScaleSymlog, ScaleSymlogSpec } from './types'\n\nexport const createSymlogScale = (\n    { constant = 1, min = 'auto', max = 'auto', reverse = false }: ScaleSymlogSpec,\n    data: ComputedSerieAxis<number>,\n    size: number,\n    axis: ScaleAxis\n) => {\n    let minValue: number\n    if (min === 'auto') {\n        minValue = data.min\n    } else {\n        minValue = min\n    }\n\n    let maxValue: number\n    if (max === 'auto') {\n        maxValue = data.max\n    } else {\n        maxValue = max\n    }\n\n    const scale = scaleSymlog<number, number>()\n        .constant(constant)\n        .rangeRound(axis === 'x' ? [0, size] : [size, 0])\n        .nice()\n\n    if (reverse === true) scale.domain([maxValue, minValue])\n    else scale.domain([minValue, maxValue])\n\n    const typedScale = scale as ScaleSymlog\n    typedScale.type = 'symlog'\n\n    return typedScale\n}\n","import uniq from 'lodash/uniq'\nimport uniqBy from 'lodash/uniqBy'\nimport sortBy from 'lodash/sortBy'\nimport last from 'lodash/last'\nimport isDate from 'lodash/isDate'\nimport { createDateNormalizer } from './timeHelpers'\nimport { ScaleAxis, ScaleSpec, Series, ScaleValue, SerieAxis, ComputedSerieAxis } from './types'\nimport { createLinearScale } from './linearScale'\nimport { createPointScale } from './pointScale'\nimport { createBandScale } from './bandScale'\nimport { createTimeScale } from './timeScale'\nimport { createLogScale } from './logScale'\nimport { createSymlogScale } from './symlogScale'\n\ntype XY = ReturnType<typeof generateSeriesXY>\n\ntype StackedXY = {\n    [K in keyof XY]: XY[K] & {\n        maxStacked: number\n        minStacked: number\n    }\n}\n\ntype InputXYSeries = Record<'x' | 'y', number | string | Date | null>\n\ninterface Data {\n    x: number\n    xStacked: number | null\n    y: number\n    yStacked: number | null\n\n    // Allow template literal `xStacked/yStacked` to be set on line 213\n    [key: string]: number | null\n}\n\ntype XYSeries = InputXYSeries & {\n    data: Data[]\n}\n\ninterface ComputedXYSeries extends InputXYSeries {\n    data: Array<{\n        data: Data\n        position: {\n            x: ScaleValue | null\n            y: ScaleValue | null\n        }\n    }>\n}\n\ntype Compare = <T>(a: T, b: T) => boolean\n\nexport const getOtherAxis = (axis: ScaleAxis): ScaleAxis => (axis === 'x' ? 'y' : 'x')\n\nexport const compareValues = (a: string | number, b: string | number) => a === b\nexport const compareDateValues = (a: Date, b: Date) => a.getTime() === b.getTime()\n\nexport function computeScale<Input extends ScaleValue>(\n    spec: ScaleSpec,\n    data: ComputedSerieAxis<any>,\n    size: number,\n    axis: ScaleAxis\n) {\n    switch (spec.type) {\n        case 'linear':\n            return createLinearScale(spec, data, size, axis)\n        case 'point':\n            return createPointScale<Input>(spec, data, size)\n        case 'band':\n            return createBandScale<Input>(spec, data, size, axis)\n        case 'time':\n            return createTimeScale(spec, data, size)\n        case 'log':\n            return createLogScale(spec, data, size, axis)\n        case 'symlog':\n            return createSymlogScale(spec, data, size, axis)\n        default:\n            throw new Error('invalid scale spec')\n    }\n}\n\nexport const computeXYScalesForSeries = (\n    _series: XYSeries[],\n    xScaleSpec: ScaleSpec,\n    yScaleSpec: ScaleSpec,\n    width: number,\n    height: number\n) => {\n    const series = _series.map(serie => ({\n        ...serie,\n        data: serie.data.map(d => ({ data: { ...d } })),\n    })) as ComputedXYSeries[]\n\n    const xy = generateSeriesXY(series, xScaleSpec, yScaleSpec)\n    if ('stacked' in xScaleSpec && xScaleSpec.stacked === true) {\n        stackX(xy as StackedXY, series)\n    }\n    if ('stacked' in yScaleSpec && yScaleSpec.stacked === true) {\n        stackY(xy as StackedXY, series)\n    }\n\n    const xScale = computeScale(xScaleSpec, xy.x, width, 'x')\n    const yScale = computeScale(yScaleSpec, xy.y, height, 'y')\n\n    series.forEach(serie => {\n        serie.data.forEach(d => {\n            d.position = {\n                x:\n                    'stacked' in xScale && xScale.stacked === true\n                        ? d.data.xStacked === null\n                            ? null\n                            : xScale(d.data.xStacked)\n                        : d.data.x === null\n                        ? null\n                        : xScale(d.data.x) ?? null,\n                y:\n                    'stacked' in yScale && yScale.stacked === true\n                        ? d.data.yStacked === null\n                            ? null\n                            : yScale(d.data.yStacked)\n                        : d.data.y === null\n                        ? null\n                        : yScale(d.data.y) ?? null,\n            }\n        })\n    })\n\n    return {\n        ...xy,\n        series,\n        xScale,\n        yScale,\n    }\n}\n\nexport const generateSeriesXY = <XValue extends ScaleValue, YValue extends ScaleValue>(\n    series: Series<XValue, YValue>,\n    xScaleSpec: ScaleSpec,\n    yScaleSpec: ScaleSpec\n) => ({\n    x: generateSeriesAxis<'x', XValue>(series, 'x', xScaleSpec),\n    y: generateSeriesAxis<'y', YValue>(series, 'y', yScaleSpec),\n})\n\n/**\n * Normalize data according to scale type, (time => Date, linear => Number)\n * compute sorted unique values and min/max.\n */\nexport const generateSeriesAxis = <Axis extends ScaleAxis, Value extends ScaleValue>(\n    series: SerieAxis<Axis, Value>,\n    axis: Axis,\n    scaleSpec: ScaleSpec,\n    {\n        getValue = d => d.data[axis],\n        setValue = (d, v) => {\n            d.data[axis] = v\n        },\n    }: {\n        getValue?: (d: { data: Record<Axis, Value | null> }) => Value | null\n        setValue?: (d: { data: Record<Axis, Value | null> }, v: Value) => void\n    } = {}\n) => {\n    if (scaleSpec.type === 'linear') {\n        series.forEach(serie => {\n            serie.data.forEach(d => {\n                const value = getValue(d)\n\n                if (value) {\n                    setValue(d, (parseFloat(String(value)) as unknown) as Value)\n                }\n            })\n        })\n    } else if (scaleSpec.type === 'time' && scaleSpec.format !== 'native') {\n        // `native` means we already have Date instances,\n        // otherwise we have to convert the values to Date.\n        const parseTime = createDateNormalizer(scaleSpec)\n\n        series.forEach(serie => {\n            serie.data.forEach(d => {\n                const value = getValue(d)\n\n                if (value) {\n                    setValue(d, (parseTime(value as Date) as unknown) as Value)\n                }\n            })\n        })\n    }\n\n    const values: unknown[] = []\n\n    series.forEach(serie => {\n        serie.data.forEach(d => {\n            values.push(getValue(d))\n        })\n    })\n\n    switch (scaleSpec.type) {\n        case 'linear': {\n            const all = sortBy(uniq(values as number[]), v => v)\n\n            return { all, min: Math.min(...all), max: Math.max(...all) }\n        }\n        case 'time': {\n            const all = uniqBy(values as Date[], v => v.getTime())\n                .slice(0)\n                .sort((a, b) => b.getTime() - a.getTime())\n                .reverse()\n\n            return { all, min: all[0], max: last(all) }\n        }\n        default: {\n            const all = uniq(values)\n\n            return { all, min: all[0], max: last(all) }\n        }\n    }\n}\n\nexport const stackAxis = (axis: ScaleAxis, xy: StackedXY, series: ComputedXYSeries[]) => {\n    const otherAxis = getOtherAxis(axis)\n    const all: number[] = []\n\n    xy[otherAxis].all.forEach(v => {\n        const compare = (isDate(v) ? compareDateValues : compareValues) as Compare\n        const stack: Array<number | null> = []\n\n        series.forEach(serie => {\n            const datum = serie.data.find(d => compare(d.data[otherAxis], v))\n            let value = null\n            let stackValue = null\n\n            if (datum !== undefined) {\n                value = datum.data[axis]\n                if (value !== null) {\n                    const head = last(stack)\n                    if (head === undefined) {\n                        stackValue = value\n                    } else if (head !== null) {\n                        stackValue = head + value\n                    }\n                }\n\n                datum.data[`${axis}Stacked`] = stackValue\n            }\n\n            stack.push(stackValue)\n\n            if (stackValue !== null) {\n                all.push(stackValue)\n            }\n        })\n    })\n\n    xy[axis].minStacked = Math.min(...all)\n    xy[axis].maxStacked = Math.max(...all)\n}\n\nconst stackX = (xy: StackedXY, series: ComputedXYSeries[]) => stackAxis('x', xy, series)\nconst stackY = (xy: StackedXY, series: ComputedXYSeries[]) => stackAxis('y', xy, series)\n"],"names":["arrayLikeToArray","arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread","defineProperty","timePrecisions","precisionCutOffs","date","setMilliseconds","setSeconds","setMinutes","setHours","setDate","setMonth","precisionCutOffsByType","millisecond","second","slice","minute","hour","day","month","year","createPrecisionMethod","precision","forEach","cutOff","createDateNormalizer","format","useUTC","precisionFn","value","undefined","Date","parseTime","utcParse","timeParse","createLinearScale","data","size","axis","min","max","stacked","reverse","clamp","nice","minValue","minStacked","maxValue","maxStacked","scale","scaleLinear","rangeRound","domain","typedScale","type","createPointScale","_spec","scalePoint","range","all","createBandScale","round","scaleBand","createTimeScale","normalize","scaleUtc","scaleTime","createLogScale","base","hasZero","some","v","Error","sign","hasMixedSign","filter","Math","scaleLog","createSymlogScale","constant","scaleSymlog","getOtherAxis","compareValues","a","b","compareDateValues","getTime","computeScale","spec","computeXYScalesForSeries","_series","xScaleSpec","yScaleSpec","width","height","series","map","serie","d","xy","generateSeriesXY","stackX","stackY","xScale","x","yScale","y","position","xStacked","yStacked","generateSeriesAxis","scaleSpec","getValue","setValue","parseFloat","String","values","push","sortBy","uniq","uniqBy","sort","last","stackAxis","otherAxis","compare","isDate","stack","datum","find","stackValue","head"],"mappings":"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"}